<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Nasze mapy</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
        var geocoder;
        var map;
        var latLng;
        var marker = [];
        var infowindow;
        
        function initialize() {        
            geocoder = new google.maps.Geocoder();      
            infowindow = new google.maps.InfoWindow();
            var mapDiv = document.getElementById('map-canvas');
            map = new google.maps.Map(mapDiv, {
              center: new google.maps.LatLng(50.241853,19.148247),
              zoom: 9,
              mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            
//            czyscimy mape
            google.maps.event.addListener(map, 'click', function(){
                infowindow.close();
            })
            codeAddress();
        }          

        function addMarker() {
            latLng = new google.maps.LatLng(lat,lon);//
            marker = new google.maps.Marker({
              position: latLng,
              map: map
            });      
        }
        
        function codeAddress() {
            var address = document.getElementById("address2").value;
            geocoder.geocode( { 'address': address}, function(results, status) {
              if (status == google.maps.GeocoderStatus.OK) {                
                map.setCenter(results[0].geometry.location);
                var key = marker.length;
                marker[key] = new google.maps.Marker({
                    map: map, 
                    position: results[0].geometry.location,
                    title: address                    
                });                                      
                google.maps.event.addListener(marker[key], 'click', function() {    
                    var inner = marker[key].title + '<br/><br/>' + marker[key].position;
                      infowindow.setContent(inner);
                      infowindow.open(map, marker[key]);                      
                });                         
              } else {
                alert("Geocode was not successful for the following reason: " + status);
              }
            });            
          }      
          
        google.maps.event.addDomListener(window, 'load', initialize);        
    </script>
    <script type="text/javascript">
        var lat;
        var lon;
        $(document).ready(function() {
            $('#coords').click(function(){
               lat = $('#lat').attr('value');
               lon = $('#lon').attr('value'); 
               addMarker();
               map.panTo(latLng);
            });           
            
            $('#address-btn').click(function(){
               codeAddress();
            });           
         });
    </script>    
    <style>
      body, html {
        padding-top: 24px;
      }
    </style>
  </head>
  <body style="font-family: Arial; border: 0 none;">
    <iframe src="http://beta.silesiafilm.com/topbar?linkBgColor=C1372D" id="sfTopBar" width="100%" scrolling="no" frameborder="0" style="border: 0; margin:0; position: absolute; top: 0; left: 0; z-index: 10000; overflow: visible; height: 24px;"></iframe>
    <script type="text/javascript">
      $('#sfTopBar').hover(function(){
        $(this).css('height', '150px');
      },
      function(){
        $(this).css('height', '24px');
      });
    </script>
      <div>
          <input id="lat" type="text"/>
          <input id="lon" type="text"/>
          <input id="coords" type="button" value="Wspolrzedne"/> 
          <br/>
          <input id="address" type="text"/>
          <input id="address-btn" type="button" value="Adres"/> 
      </div>
      <input id="address2" type="hidden" value="Åšw. Jana 24, Katowice, Poland"/>
      <div id="map-canvas" style="width: 500px; height: 400px"></div>
  </body>
</html>